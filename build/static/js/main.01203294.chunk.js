(this["webpackJsonppart2-notes"]=this["webpackJsonppart2-notes"]||[]).push([[0],{255:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n(32),s=n.n(a),i=n(8),o=n(269),j=n(263),l=n(13),u=n(260),b=n(114),d=function(){var e=Object(l.g)();return Object(r.jsxs)(u.a,{children:[Object(r.jsx)("h1",{children:"Any Contest"}),Object(r.jsx)("p",{children:"\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306f\u69d8\u3005\u306a\u30b8\u30e3\u30f3\u30eb\u306e\u30b3\u30f3\u30c6\u30b9\u30c8\u3092\u958b\u50ac\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\u65e9\u901f\u30b8\u30e3\u30f3\u30eb\u4e00\u89a7\u3092\u898b\u3066\u304f\u3060\u3055\u3044\uff01"}),Object(r.jsx)("p",{children:Object(r.jsx)(b.a,{variant:"primary",onClick:function(t){t.preventDefault(),e.push("/fields")},children:"\u30b8\u30e3\u30f3\u30eb\u4e00\u89a7\u3078"})})]})},h=n(261),O=n(270),p=n(6),x=n.n(p),f=n(9),m=n(11),g=n.n(m),v=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/fields/","name"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.g)(),t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],s=n[1];Object(c.useEffect)((function(){v().then((function(e){s(e)}))}),[]);var o=function(t){t.preventDefault(),e.push("/fields/".concat(t.target.name))};return 0===a.length?Object(r.jsx)("p",{children:"Loading contests..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Contests"}),Object(r.jsx)(h.a,{children:a.map((function(e){var t=e[0],n=e[1];return Object(r.jsx)(O.a,{style:{width:"16rem"},children:Object(r.jsxs)(O.a.Body,{children:[Object(r.jsx)(O.a.Title,{children:t}),Object(r.jsx)(O.a.Text,{children:n}),Object(r.jsx)(b.a,{name:t,variant:"primary",onClick:o,children:"\u30b3\u30f3\u30c6\u30b9\u30c8\u4e00\u89a7\u3078"})]})},t)}))})]})},w=n(262),k=n(14),N="/api/contests/",S=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(N,"search_by_date"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(N).concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(N,"ranking/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="bearer ".concat(JSON.parse(localStorage.getItem("loggedUser")).token),e.next=3,g.a.post("".concat(N,"register/"),{contestName:t},{headers:{Authorization:n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="bearer ".concat(JSON.parse(localStorage.getItem("loggedUser")).token),e.next=3,g.a.post("".concat(N,"unregister/"),{contestName:t},{headers:{Authorization:n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.fieldName,n={field:t,fromTime:"2000-01-01 00:00:00",toTime:"2100-00-00 00:00:00"},a=Object(c.useState)(null),s=Object(i.a)(a,2),o=s[0],j=s[1];return Object(c.useEffect)((function(){S(n).then((function(e){return j(e)}))}),[]),null===o?Object(r.jsx)("p",{children:"Loading contests..."}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:t}),Object(r.jsx)(w.a,{striped:!0,children:Object(r.jsx)("tbody",{children:o.map((function(e){return Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:Object(r.jsx)(k.b,{to:"/contests/".concat(e.name),children:e.name})})},e.name)}))})})]})},E=n(267),U=function(e){var t=e.contestName,n=e.active;return Object(r.jsxs)(E.a,{variant:"tabs",defaultActiveKey:"/contests/".concat(t),children:[Object(r.jsx)(E.a.Link,{href:"/contests/".concat(t),active:"home"===n,children:"home"}),Object(r.jsx)(E.a.Link,{href:"/contests/".concat(t,"/problems"),active:"problems"===n,children:"problems"}),Object(r.jsx)(E.a.Link,{href:"/contests/".concat(t,"/ranking"),active:"ranking"===n,children:"ranking"}),Object(r.jsx)(E.a.Link,{href:"/contests/".concat(t,"/submissions"),active:"submissions"===n,children:"submissions"})]})},D=function(){var e=Object(l.g)();return Object(r.jsx)(b.a,{variant:"primary",onClick:function(t){t.preventDefault(),e.push("/signup")},children:"\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3059\u308b"})},J=function(e){var t=e.contestName,n=Object(c.useState)(null),a=Object(i.a)(n,2),s=a[0],o=a[1],j=Object(c.useState)(!1),l=Object(i.a)(j,2),d=l[0],h=l[1],O=Object(c.useState)(!0),p=Object(i.a)(O,2),x=p[0],f=p[1],m=Object(c.useState)(!0),g=Object(i.a)(m,2),v=g[0],y=g[1];return Object(c.useEffect)((function(){C(t).then((function(e){o(e[0]);var t=JSON.parse(window.localStorage.getItem("loggedUser"));if(null!==t){var n=t.userid,r=0!==e[0].ranking.filter((function(e){return e.id===n})).length;f(r),h(!0),y(e[0].__v)}}))}),[]),null===s?Object(r.jsx)("div",{children:"Loading contests..."}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{contestName:t,active:"home"}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)("h1",{children:s.name}),Object(r.jsx)("div",{children:s.description}),!v&&d&&!x&&Object(r.jsx)(b.a,{variant:"primary",onClick:function(e){e.preventDefault(),M(t),f(!0)},children:"\u767b\u9332"}),!v&&d&&x&&Object(r.jsx)(b.a,{variant:"secondary",onClick:function(e){e.preventDefault(),L(t),f(!1)},children:"\u767b\u9332\u89e3\u9664"}),!d&&Object(r.jsx)(D,{})]})]})},F=function(e){var t=e.contestName,n=Object(c.useState)(null),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){C(t).then((function(e){return o(e[0].problemNames)}))}),[]),null===s?Object(r.jsx)("p",{children:"Loading contests..."}):Object(r.jsxs)("div",{children:[Object(r.jsx)(U,{contestName:t,active:"problems"}),Object(r.jsxs)(w.a,{bordered:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"col",children:" "}),Object(r.jsx)("th",{scope:"col",children:"\u554f\u984c\u540d"})]})}),Object(r.jsx)("tbody",{children:s.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:t}),Object(r.jsx)("td",{children:Object(r.jsx)(k.b,{to:"/problems/".concat(e),children:e})})]},e)}))})]})]})},A=n(266),W="/api/submissions/",B=function(){var e=Object(f.a)(x.a.mark((function e(){var t,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=JSON.parse(localStorage.getItem("loggedUser")))){e.next=3;break}return e.abrupt("return",[]);case 3:return n="bearer ".concat(t.token),e.next=6,g.a.post("".concat(W,"userid/"),{},{headers:{Authorization:n}});case 6:return r=e.sent,e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="bearer ".concat(JSON.parse(localStorage.getItem("loggedUser")).token),e.next=3,g.a.post(W,t,{headers:{Authorization:n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.contestName,n=e.problemName,a=Object(l.g)(),s=Object(c.useState)(!1),o=Object(i.a)(s,2),j=o[0],u=o[1];Object(c.useEffect)((function(){null!==JSON.parse(window.localStorage.getItem("loggedUser"))&&u(!0)}),[]);var d=function(){var e=Object(f.a)(x.a.mark((function e(r){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),c=r.target[0].value,e.prev=2,e.next=5,R({problemName:n,contestName:t,answer:c});case 5:e.sent,a.push("/contests/".concat(t,"/submissions")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("err");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{children:Object(r.jsx)("span",{children:Object(r.jsx)("h3",{style:{marginTop:40,fontWeight:"bold"},children:"\u5165\u529b"})})}),Object(r.jsx)(A.a,{onSubmit:d,children:Object(r.jsxs)(A.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(r.jsx)(A.a.Control,{as:"textarea",rows:1}),j&&Object(r.jsx)(b.a,{variant:"primary",type:"submit",children:"\u63d0\u51fa"}),!j&&Object(r.jsx)(D,{})]})})]})},K=function(e){var t=e.judgeType,n=e.contestName,c=e.problemName;return"SimpleInput"===t?Object(r.jsx)(z,{contestName:n,problemName:c}):Object(r.jsx)("div",{children:"error"})},_=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/problems/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G={fontWeight:"bold"},H=function(e){var t=e.problemName,n=Object(c.useState)(null),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){_(t).then((function(e){return o(e[0])}))}),[]),null===s?Object(r.jsx)("p",{children:"Loading contests..."}):Object(r.jsxs)("div",{children:[Object(r.jsx)(U,{contestName:s.contest}),Object(r.jsxs)("span",{children:[Object(r.jsx)("h2",{style:G,children:s.name}),Object(r.jsx)("hr",{})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("span",{children:Object(r.jsx)("h3",{style:G,children:"\u554f\u984c\u6587"})}),Object(r.jsx)("span",{children:s.problemStatement})]}),Object(r.jsx)(K,{judgeType:s.judgeType,contestName:s.contest,problemName:t})]})},P=n(264),q=function(e){var t=e.contestName,n=Object(c.useState)(null),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){B().then((function(e){o(e.filter((function(e){return e.contestName===t})).reverse())}))}),[]),null===s?Object(r.jsx)("div",{children:"Loading contests..."}):0===s.length?Object(r.jsx)("div",{children:"\u63d0\u51fa\u306f\u3042\u308a\u307e\u305b\u3093"}):Object(r.jsx)(j.a,{children:Object(r.jsxs)(w.a,{bordered:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"problem"}),Object(r.jsx)("th",{children:"answer"}),Object(r.jsx)("th",{children:"state"}),Object(r.jsx)("th",{children:"time"})]})}),Object(r.jsx)("tbody",{children:s.map((function(e,t){return Object(r.jsxs)("tr",{className:0===t?"OK"===e.state?"table-success":"table-danger":"table-light",children:[Object(r.jsx)("td",{children:e.problemName}),Object(r.jsx)("td",{children:e.answer}),Object(r.jsxs)("td",{children:[Object(r.jsxs)(P.a,{variant:"OK"===e.state?"success":"danger",children:[" ",e.state," "]})," "]}),Object(r.jsx)("td",{children:e.time})]},t)}))})]})})},Q=function(e){var t=e.contestName;return Object(r.jsxs)("div",{children:[Object(r.jsx)(U,{contestName:t,active:"submissions"}),Object(r.jsx)(o.a,{variant:"danger",children:"\u73fe\u5728\u81ea\u5206\u306e\u63d0\u51fa\u3057\u304b\u898b\u3089\u308c\u306a\u3044\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002"}),Object(r.jsx)(q,{contestName:t})]})},V=function(e){var t=e.ranking,n=Object(c.useState)(1),a=Object(i.a)(n,2),s=a[0],o=a[1],j=Object(c.useState)(t.slice(0,Math.min(20,t.length))),l=Object(i.a)(j,2),u=l[0],b=l[1],d=Math.ceil(t.length/20),h=function(e){var n=s+e;o(n),b(t.slice(20*(n-1),20*n))};return 0===u.length?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:"\u53c2\u52a0\u8005\u306f\u5c45\u307e\u305b\u3093"})}):Object(r.jsxs)(r.Fragment,{children:[1!==s&&Object(r.jsx)("input",{type:"button",onClick:function(){return h(-1)},value:"previous page"}),s!==d&&Object(r.jsx)("input",{type:"button",onClick:function(){return h(1)},value:"next page"}),Object(r.jsxs)(w.a,{bordered:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"rank"}),Object(r.jsx)("th",{children:"username"}),Object(r.jsx)("th",{children:"score"}),Object(r.jsx)("th",{children:"time"})]})}),Object(r.jsx)("tbody",{children:u.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:20*(s-1)+t+1}),Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.point}),Object(r.jsx)("td",{children:e.submissionTime})]},t)}))})]})]})},X=function(e,t){return e.point===t.point?e.submissionTime===t.submissionTime?0:e.submissionTime>t.submissionTime?1:-1:t.point-e.point},Y=function(e){var t=e.contestName,n=Object(c.useState)(null),a=Object(i.a)(n,2),s=a[0],o=a[1];return Object(c.useEffect)((function(){T(t).then((function(e){e.sort(X),o(e)}))}),[]),null===s?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{contestName:t}),Object(r.jsx)("div",{children:"Loading contests..."})]}):0===s.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{contestName:t}),Object(r.jsx)("div",{children:"\u53c2\u52a0\u8005\u306f\u5c45\u307e\u305b\u3093"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{contestName:t,active:"ranking"}),Object(r.jsx)(V,{ranking:s})]})},Z=n(265),$="/api/ratings/",ee=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat($,"userid/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=e.rate;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(w.a,{bordered:!0,hover:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"num"}),Object(r.jsx)("th",{children:"contest"}),Object(r.jsx)("th",{children:"performance"}),Object(r.jsx)("th",{children:"rating"})]})}),Object(r.jsx)("tbody",{children:t.ratingData.map((function(e,n){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t.ratingData.length-n}),Object(r.jsx)("td",{children:e.contestName}),Object(r.jsx)("td",{children:t.revPref[n]}),Object(r.jsx)("td",{children:t.revRate[n]})]},e.contestName)}))})]})})},ne=n(15),re=n(119),ce=function(e){for(var t=e.rate,n=[0].concat(t.revRate.slice().reverse()),c=[""],a=1;a<=n.length;a++)1===a||a%5===0?c.push(a.toString()):c.push("");c.push("");for(var s=["rgba(90, 90, 90, 1)","rgba(205, 205, 205, 1)","rgba(250, 217, 174, 1)","rgba(163, 239, 170, 1)","rgba(192, 255, 243, 1)","rgba(109, 129, 255, 1)","rgba(246, 255, 139, 1)","rgba(255, 165, 58, 1)","rgba(255, 119, 119, 1)"],i=[],o=0;o<s.length;o++){for(var j=[],l=0;l<n.length+2;l++)o===s.length-1?j.push(5e3):j.push(400*(o+1));i.push({colorData:j,color:s[o]})}var u=[];u.push({type:"line",borderColor:"rgba(255, 255, 255, 1)",borderWidth:3,borderCapStyle:"round",pointBorderColor:"rgba(0, 0, 0, 1)",pointBackgroundColor:"rgba(255, 255, 255, 1)",data:n,pointRadius:4,pointHitRadius:0,pointBorderWidth:1,label:"rate"});for(var b=0;b<i.length;b++)u.push({type:"line",data:i[b].colorData,fill:!0,borderWidth:0,pointRadius:0,backgroundColor:i[b].color,label:i[b].color});var d={labels:c,datasets:u},h={scales:{x:{beforeFit:!0,offset:!1},y:{min:0,max:200*Math.ceil(Math.max.apply(Math,Object(ne.a)(n))/200)+200,ticks:{stepSize:400}}},plugins:{legend:!1},animation:{duration:0}};return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(re.a,{data:d,options:h})})},ae=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),o=Object(i.a)(s,2),j=o[0],l=o[1],u=JSON.parse(window.localStorage.getItem("loggedUser"));if(Object(c.useEffect)((function(){if(null!==u){var e=u.userid;ee(e).then((function(e){e.map((function(e){for(var t=e.ratingData.slice().reverse(),n=[],r=[],c=t.length-1;c>=0;c--){var a=t[c];if(c===t.length-1){var s=Math.floor(4*(parseInt(a.rating)+400)-5700),i=Math.floor(Math.max(a.rating*(t.length-c)/5,Math.min(a.rating,Math.max(0,s/4)+80)));n.push(s),r.push(i)}else if(c>=t.length-5){var o=Math.floor(4*(parseInt(a.rating)+400)-3*(parseInt(t[c+1].rating)+400)),j=Math.floor(Math.max(a.rating*(t.length-c)/5,Math.min(a.rating,Math.max(0,(o+3*r[r.length-1])/4)+400*(t.length-c)/5)));n.push(o),r.push(j)}else{var l=Math.floor(4*parseInt(a.rating)-3*parseInt(t[c+1].rating))+400,u=Math.floor(a.rating)+400;n.push(l),r.push(u)}}return n.reverse(),r.reverse(),e.revPref=n,e.revRate=r,e})),a(e),l(e[0])}))}}),[]),null===n||null===j)return Object(r.jsx)("div",{children:"Loading contests..."});if(0===n.length)return Object(r.jsx)("div",{children:"\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044"});return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Z.a,{children:[Object(r.jsx)(Z.a.Toggle,{variant:"primary",id:"dropdown-basic",children:"\u30b3\u30f3\u30c6\u30b9\u30c8\u3092\u9078\u3076"}),Object(r.jsx)(Z.a.Menu,{children:n.map((function(e,t){return Object(r.jsxs)(Z.a.Item,{onClick:function(){return function(e){var t=n[e];l(t)}(t)},children:[" ",e.fieldName," "]},e.fieldName)}))})]}),Object(r.jsx)("h1",{children:j.fieldName}),Object(r.jsx)(ce,{rate:j}),Object(r.jsx)(te,{rate:j})]})},se=n(268),ie=function(e){var t=e.user,n=e.style;return t.name?Object(r.jsx)("em",{style:n,children:t.name}):Object(r.jsxs)(E.a.Link,{href:"#",as:"span",children:[Object(r.jsx)(k.b,{to:"/signup",style:n,children:"signup"}),Object(r.jsx)(k.b,{to:"/login",style:n,children:"login"})]})},oe={padding:5,color:"white"},je=function(e){var t=e.user;return Object(r.jsxs)(se.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",text:"light",children:[Object(r.jsx)(se.a.Brand,{href:"/",children:"Any Contest"}),Object(r.jsx)(E.a,{className:"mr-auto",children:Object(r.jsxs)(E.a.Link,{href:"#",as:"span",children:[Object(r.jsx)(k.b,{style:oe,to:"/fields",children:"contests"}),Object(r.jsx)(k.b,{style:oe,to:"/rating",children:"rating"})]})}),Object(r.jsx)(E.a,{children:Object(r.jsx)(ie,{user:t,style:oe})})]})},le=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login/",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){var t=e.setUser,n=e.setMessage,c=Object(l.g)(),a=function(){var e=Object(f.a)(x.a.mark((function e(r){var a,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=r.target[0].value,s=r.target[1].value,e.prev=3,e.next=6,le({id:a,password:s});case 6:i=e.sent,n("Success: welcome ".concat(a)),setTimeout((function(){n(null)}),5e3),window.localStorage.setItem("loggedUser",JSON.stringify(i)),t({id:a,name:i.name}),n("Success: welcome ".concat(i.name)),setTimeout((function(){n(null)}),5e3),c.push("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n("Error: wrong credentials"),setTimeout((function(){n(null)}),5e3);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"login"}),Object(r.jsx)(A.a,{onSubmit:a,children:Object(r.jsxs)(A.a.Group,{children:[Object(r.jsx)(A.a.Label,{children:"id:"}),Object(r.jsx)(A.a.Control,{type:"text",name:"id"}),Object(r.jsx)(A.a.Label,{children:"password:"}),Object(r.jsx)(A.a.Control,{type:"password"}),Object(r.jsx)(b.a,{variant:"primary",type:"submit",children:"login"})]})})]})},be=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e){var t=e.setUser,n=e.setMessage,c=Object(l.g)(),a=function(){var e=Object(f.a)(x.a.mark((function e(r){var a,s,i,o,j;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=r.target[0].value,s=r.target[1].value,i=r.target[2].value,o=r.target[3].value,i===o){e.next=9;break}return n("Error: \u5165\u529b\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093"),setTimeout((function(){n(null)}),5e3),e.abrupt("return");case 9:return e.prev=9,e.next=12,be({id:a,password:i,name:s});case 12:j=e.sent,t({id:a,name:s}),n("Success: welcome ".concat(s)),setTimeout((function(){n(null)}),5e3),window.localStorage.setItem("loggedUser",JSON.stringify(j)),c.push("/"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),n("Error: \u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f\u3001\u9055\u3046id\u3092\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044"),setTimeout((function(){n(null)}),5e3);case 24:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"signup"}),Object(r.jsx)(A.a,{onSubmit:a,children:Object(r.jsxs)(A.a.Group,{children:[Object(r.jsx)(A.a.Label,{children:"id:"}),Object(r.jsx)("span",{class:"text-danger",children:"\u203b\u767b\u9332\u5f8cid\u306f\u5909\u66f4\u51fa\u6765\u307e\u305b\u3093"}),Object(r.jsx)(A.a.Control,{type:"text",name:"id"}),Object(r.jsx)(A.a.Label,{children:"user name:"}),Object(r.jsx)(A.a.Control,{type:"text",name:"name"}),Object(r.jsx)(A.a.Label,{children:"password:"}),Object(r.jsx)(A.a.Control,{type:"password"}),Object(r.jsx)(A.a.Label,{children:"confirme password:"}),Object(r.jsx)(A.a.Control,{type:"password"}),Object(r.jsx)(b.a,{variant:"primary",type:"submit",children:"login"})]})})]})},he=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"TKTL notes app"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Matti Luukkainen"}),Object(r.jsx)("li",{children:"Juha Tauriainen"}),Object(r.jsx)("li",{children:"Arto Hellas"})]})]})},Oe=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),u=Object(i.a)(s,2),b=u[0],h=u[1],O=Object(l.h)("/fields/:field"),p=O?O.params.field:null,x=Object(l.h)("/contests/:contest"),f=x?x.params.contest:null,m=Object(l.h)("/problems/:problem"),g=m?m.params.problem:null;return Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);a(t)}}),[]),Object(r.jsxs)("div",{children:[b&&b.startsWith("Success:")&&Object(r.jsx)(o.a,{variant:"success",children:b}),b&&b.startsWith("Error:")&&Object(r.jsx)(o.a,{variant:"danger",children:b}),Object(r.jsx)(je,{user:n}),Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/fields/:field",children:Object(r.jsx)(I,{fieldName:p})}),Object(r.jsx)(l.b,{path:"/contests/:contest/problems",children:Object(r.jsx)(F,{contestName:f})}),Object(r.jsx)(l.b,{path:"/contests/:contest/submissions",children:Object(r.jsx)(Q,{contestName:f})}),Object(r.jsx)(l.b,{path:"/contests/:contest/ranking",children:Object(r.jsx)(Y,{contestName:f})}),Object(r.jsx)(l.b,{path:"/contests/:contest",children:Object(r.jsx)(J,{contestName:f})}),Object(r.jsx)(l.b,{path:"/problems/:problem",children:Object(r.jsx)(H,{problemName:g})}),Object(r.jsx)(l.b,{path:"/fields",children:Object(r.jsx)(y,{})}),Object(r.jsx)(l.b,{path:"/users",children:n?Object(r.jsx)(he,{}):Object(r.jsx)(l.a,{to:"/login"})}),Object(r.jsx)(l.b,{path:"/login",children:Object(r.jsx)(ue,{setUser:function(e){return a(e)},setMessage:function(e){return h(e)}})}),Object(r.jsx)(l.b,{path:"/signup",children:Object(r.jsx)(de,{setUser:function(e){return a(e)},setMessage:function(e){return h(e)}})}),Object(r.jsx)(l.b,{path:"/rating",children:Object(r.jsx)(ae,{})}),Object(r.jsx)(l.b,{path:"/",children:Object(r.jsx)(d,{})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("br",{}),Object(r.jsx)("em",{children:"kuso app"})]})]})]})};s.a.render(Object(r.jsx)(k.a,{children:Object(r.jsx)(Oe,{})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.01203294.chunk.js.map